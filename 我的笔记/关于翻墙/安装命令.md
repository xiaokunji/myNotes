注意版本: 需要**centos7**

**1.先装vim:**

`yum install vim -y`

**2.装wges:**

`yum install wget -y`

**3.下载shadowsocksR文件:**

`wget https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh`

**4.启动shadowsocksR文件:**

`bash shadowsocksR.sh`

**5.输入翻墙账号密码和端口,选项可以依次选择 2,5,7**

 

**6.导入密钥**

`rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org`

**7.添加库**

`rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm`

`rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-4.el7.elrepo.noarch.rpm`

**8.更新内核**

`yum --enablerepo=elrepo-kernel install kernel-ml  -y`

**9.查询所有内核列表**

`rpm -qa | grep kernel`

**10.看启动内核**

`awk -F\' '$1=="menuentry " {print $2}' /etc/grub2.cfg`

**11.修改默认启动内核**

`grub2-set-default 0`

**12.重启**

`reboot`

查询默认内核是否为：4.9.8-1.el7.elrepo.x86_64

`uname -r`

**13.修改配置开启BBR**

`echo "net.core.default_qdisc=fq" >> /etc/sysctl.conf && echo "net.ipv4.tcp_congestion_control=bbr" >> /etc/sysctl.conf`

**14.加载新配置，查看内核是否已开启BBR**

`sysctl -p && sysctl net.ipv4.tcp_available_congestion_control`

**15.查看BBR是否启动，返回值有 tcp_bbr 模块即说明已启动**

`lsmod | grep bbr`

> 如果需要关闭BBR，用vi编辑 /etc/sysctl.conf，删除其中的两行：
>
> ```properties
> net.core.default_qdisc = fq
> 
> net.ipv4.tcp_congestion_control = bbr
> ```
>
> 
>
> 然后执行命令：
>
> `sysctl -p`

 备用地址: 

`` wget -N –no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh && chmod +x ssr.sh && bash ssr.sh`

但是只支持centos6 且有python2  

> http://earnmoneyonlinetutorial.com/affiliate-marketing-tools/setup-ssr-proxy-server-under-centos/

安装[libsodium](https://github.com/jedisct1/libsodium/releases/download/1.0.18-RELEASE/libsodium-1.0.18.tar.gz)(好像又不太行)

`yum install epel-release -y && yum install libsodium -y`

秋水启用bbr地址:

`wget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh && sh  bbr.sh`

整合命令:

```sh
yum install vim -y && yum install wget -y && wget  https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh && bash shadowsocksR.sh

rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org && rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm && yum --enablerepo=elrepo-kernel install kernel-ml  -y && rpm -qa | grep kernel && awk -F\' '$1=="menuentry " {print $2}' /etc/grub2.cfg && grub2-set-default 0

reboot
```

