截取启动日志
```
###################################
# 过滤启动日志 函数
#作用: 截取从第一行到含有关键词的那一行,将截取结果存放到目标文件中,不会影响原日志文件
#说明：
#1. 使用grep命令确认关键词是否存在 , 判断50次,不能一直判断下去
#2. 如果存在则截取, 从第一行到含有关键词的那一行,将截取结果存放到$2
#3. $1 表示   从这个日志文件 过滤出 启动日志
#4. $2 表示   启动日志存放路径
#注意:
#1. 如果找不到关键词则会默认读取1000行日志,此时等待时间最长:100秒
#2. 如果关键词重复出现,则会取第一次
#3. 关键词中不能有特殊字符(适用于正则)

#例子:
#  sh ~/getStartLog.sh temp/nohup.out temp/start.log  #表示从temp目录下的nohup.out文件中过滤出启动日志,存放到temp中的start.log文件
###################################

keyword="JVM running for"  #启动成功的关键词
num=1000   #默认读取日志的行数,从头开始读
echo "正在启动中....请等待!">$2
for i in {1..50} ; do
    if  grep  "$keyword" $1 ;then
        sed -n '1,/'"${keyword}"'/p' $1>$2
        break
    else 
        sleep 2
    fi
done

if [  `sed -n '$=' $2 `  -lt 2 ]  ; then
    sed -n '1,'${num}'p' $1>$2
    echo -e  "\n\n没有找到关键词:${keyword}">>$2
    echo -e  "\n####################默认读取前${num}行日志####################">>$2
fi
echo -e  "\n####################启动完成####################">>$2


```



替换前端包
```
# 可优化: 参数可以是任意路径的任意文件; 带解压功能 ; config.json文件动态的从原有包中获取  ;  允许在任意路径下执行该脚本
new_path="/usr/local/nginx/html/"
old_path="/home/jht/html/"
cur_date="`date +%Y%m%d`"
info(){
	echo " ## 作用: 替换天启和天启运营平台的前端包.把$old_path 下的jportal或者jplatform更新到$new_path 下 "
	echo " ## 要求: 
	1. (传到服务器上的)包名必须是jplatform或者jportal的文件夹(注意是文件夹,不是压缩包)
        2. $new_path 下的config.json文件需填写正确(用于jportal)
       	3. 知晓用户(jht)密码,因为要输入密码 "
	echo " ## 例子: sh ~/html/replacePackage.sh jportal  , 可选参数: {jporta | jplatform  | info}  "
}
rep(){

	if [ ! -d "$old_path$1" ];then
		echo " 路径 $old_path$1 不存在,文件 $1 不存在"
		return 
	fi

	if [ -d "$new_path$1_$cur_date" ];then
		cur_date="`date +%Y%m%d_%H.%M`" #得到名字后缀
	fi

	# echo "password" |   sudo -S  mv $new_path$1  $new_path$1_$cur_date # 不需要输入密码
	sudo mv $new_path$1  $new_path$1_$cur_date #备份原有的包
	sudo mv $old_path$1  $new_path$1  #用新包替换老包

	if [ $1 == 'jportal' ];then 
		sudo cp -f  $new_path"config.json"   $new_path"jportal/static/config" #替换config.json文件
	fi
	echo "替换 $1 成功,路径: $new_path$1"
}

case "$1" in
   'jplatform'|'jportal'|'test' )
      rep $1
      ;;
   'info' )
      info
      ;;
   *)
     echo " 允许的参数: { jportal | jplatform | info } "
    ;;
esac


```