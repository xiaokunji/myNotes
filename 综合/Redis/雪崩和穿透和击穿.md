[toc]

# 缓存穿透
缓存穿透，**是指频繁查询一个数据库一定不存在的数据**,这种redis一般不会保存,这样redis被穿过了,直接去访问了数据库,这种穿透多了,数据库就压力大。正常的使用缓存流程大致是，数据查询先进行缓存查询，如果key不存在或者key已经过期，再对数据库进行查询，并把查询到的对象
> 缓存被穿透了,因为总是查询一些在redis中查不到的值

解决方案:
1.  使用锁,将这次请求锁住,等数据库返回后才释放(分布式环境用分布式锁,单机用普通锁(synchronized等))
2.  接口限流与熔断、降级
3.  布隆过滤器(java的guava包中默认误判率3%(最合适)) (将全部"可能"数据存到布隆过滤器中,当redis中找不到时,先经过布隆,如果过滤器说不存在,就不用访问数据库了,直接返回)
4.  将这种key存到redis,设置较短的过期时间,比如1分钟/5分钟


# 缓存雪崩
缓存雪崩，**是指在某一个时间段，缓存集中过期失效**,大批量key失效,命中redis的概率就小了,只能去查数据库了.   

其实集中过期，倒不是非常致命，比较致命的缓存雪崩，<u>是缓存服务器某个节点宕机或断网</u>。因为自然形成的缓存雪崩，一定是在某个时间段集中创建缓存，那么那个时候数据库能顶住压力，这个时候，数据库也是可以顶住压力的。无非就是对数据库产生周期性的压力而已。

解决方案:
1.  也是像解决缓存穿透一样加锁排队
2.  建立备份缓存
3.  给同时添加key时设置不同过期时间

# 缓存击穿
缓存击穿，**热点key在请求高峰期失效了，瞬间大量请求落到数据库**，就像在一个屏障上凿开了一个洞。



> 链接:https://baijiahao.baidu.com/s?id=1619572269435584821&wfr=spider&for=pc
https://blog.csdn.net/fanrenxiang/article/details/80542580
